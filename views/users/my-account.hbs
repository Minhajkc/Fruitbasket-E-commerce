<!doctype html>
<html class="no-js" lang="en">


<!-- Mirrored from template.hasthemes.com/obrien/obrien/my-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Feb 2024 05:40:19 GMT -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>MyAccount</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->
     <link rel="shortcut icon" type="image/x-icon" href="user-assets/images/logo.png">

    <!-- CSS
	============================================ -->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/user-assets/css/vendor/bootstrap.min.css">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="/user-assets/css/vendor/font.awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="/user-assets/css/vendor/ionicons.min.css">
    <!-- Slick CSS -->
    <link rel="stylesheet" href="/user-assets/css/plugins/slick.min.css">
    <!-- Animation -->
    <link rel="stylesheet" href="/user-assets/css/plugins/animate.min.css">
    <!-- jQuery Ui -->
    <link rel="stylesheet" href="/user-assets/css/plugins/jquery-ui.min.css">
    <!-- Nice Select -->
    <link rel="stylesheet" href="/user-assets/css/plugins/nice-select.min.css">
    <!-- Magnific Popup -->
    <link rel="stylesheet" href="/user-assets/css/plugins/magnific-popup.css">

    <!-- Vendor & Plugins CSS (Please remove the comment from below vendor.min.css & plugins.min.css for better website load performance and remove css files from the above) -->

    <!-- <link rel="stylesheet" href="/user-assets/css/vendor/vendor.min.css">
    <link rel="stylesheet" href="/user-assets/css/plugins/plugins.min.css"> -->

    <!-- Main Style CSS (Please use minify version for better website load performance) -->
    <link rel="stylesheet" href="/user-assets/css/style.css">
    <!-- <link rel="stylesheet" href="/user-assets/css/style.min.css"> -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
           <!-- Toastify CSS -->
    <link href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" rel="stylesheet">

    <!-- jQuery (required by Toastify) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Toastify JS -->
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>

    <div class="contact-wrapper">
        <header class="main-header-area">
            <!-- Main Header Area Start -->
            <div class="main-header">
                <div class="container container-default custom-area">
                    <div class="row">
                        <div class="col-lg-12 col-custom">
                            <div class="row align-items-center">
                                <div class="col-lg-2 col-xl-2 col-sm-6 col-6 col-custom">
                                    <div class="header-logo d-flex align-items-center">
                                        <a href="/">
                                            <img class="img-full" src="/user-assets/images/logo/logo.png" alt="Header Logo">
                                        </a>
                                    </div>
                                </div>
                                <div class="col-lg-8 col-xl-7 position-static d-none d-lg-block col-custom">
                                    <nav class="main-nav d-flex justify-content-center">
                                        <ul class="nav">
                                            <li>
                                                <a href="/">
                                                    <span class="menu-text"> Home</span> 
                                                </a>
                                               
                                            </li>
                                            <li>
                                                <a href="/Shop">
                                                    <span class="menu-text">Shop</span>
                                                    <i class="fa fa-angle-down"></i>
                                                </a>
                                               
                                                   
                                                    <div >
                                                        <ul class="dropdown-submenu dropdown-hover ps-3">
                                                            <li><a href="/Shop">Shop</a></li>
                                                            <li><a href="/Cart">Cart</a></li>
                                                            <li><a href="/Wishlist">Wishlist</a></li>
                                                        </ul>
                                                    </div>
                                           
                                            </li>
                                           
                                        
                                         <li>
                                                <a href="/About">
                                                    <span class="menu-text"> About</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="/Contact">
                                                    <span class="menu-text">Contact</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                                <div class="col-lg-2 col-xl-3 col-sm-6 col-6 col-custom">
                                    <div class="header-right-area main-nav">
                                        <ul class="nav">
                                            <li class="login-register-wrap d-none d-xl-flex">
                                                <span style="color: rgb(0, 0, 0); font-size:20px">
     <a href="/MyAccount">  <i class="fas fa-user-circle" style="cursor: pointer;"></i></a>
    </span>
      <span><a href="/cart"> <i class="ion-bag" style="font-size: 25px;"></i></a></span>
       {{#unless user}}
                                                <span><a href="/userlogin">Login</a></span>
                                                <span><a href="/userregister">Register</a></span>
                                                {{/unless}}
                                            </li>
                                            
                                          
                                            <li class="mobile-menu-btn d-lg-none">
                                                <a class="off-canvas-btn" href="#">
                                                    <i class="fa fa-bars"></i>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Main Header Area End -->
            <!-- Sticky Header Start Here-->
            <div class="main-header header-sticky">
                <div class="container container-default custom-area">
                    <div class="row">
                        <div class="col-lg-12 col-custom">
                            <div class="row align-items-center">
                                <div class="col-lg-2 col-xl-2 col-sm-6 col-6 col-custom">
                                    <div class="header-logo">
                                        <a href="/">
                                            <img class="img-full" src="/user-assets/images/logo/logo.png" alt="Header Logo">
                                        </a>
                                    </div>
                                </div>
                                <div class="col-lg-8 col-xl-7 position-static d-none d-lg-block col-custom">
                                    <nav class="main-nav d-flex justify-content-center">
                                        <ul class="nav">
                                            <li>
                                                <a href="/">
                                                    <span class="menu-text"> Home</span>
                                                    
                                                </a>
                                            
                                            </li>
                                            <li>
                                                <a href="/shop">
                                                    <span class="menu-text">Shop</span>
                                                    <i class="fa fa-angle-down"></i>
                                                </a>
                                                    <div >
                                                        <ul class="dropdown-submenu dropdown-hover ps-3">
                                                            <li><a href="/Shop">Shop</a></li>
                                                            <li><a href="/Cart">Cart</a></li>
                                                            <li><a href="/Wishlist">Wishlist</a></li>
                                                        </ul>
                                                    </div>
                                            </li>
                                           
                                          
                                            <li>
                                                <a href="/about">
                                                    <span class="menu-text"> About</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="/contact">
                                                    <span class="menu-text">Contact</span>
                                                </a>
                                            </li>
                                             
                                            
                                        </ul>
                                    </nav>
                                </div>
                               <div class="col-lg-2 col-xl-3 col-sm-6 col-6 col-custom">
                                    <div class="header-right-area main-nav">
                                        <ul class="nav">
                                            <li class="login-register-wrap d-none d-xl-flex">
                                                <span style="color: rgb(0, 0, 0); font-size:20px">
     <a href="/MyAccount">  <i class="fas fa-user-circle" style="cursor: pointer;"></i></a>
    </span>
      <span><a href="/cart"> <i class="ion-bag" style="font-size: 25px;"></i></a></span>
       {{#unless user}}
                                                <span><a href="/userlogin">Login</a></span>
                                                <span><a href="/userregister">Register</a></span>
                                                {{/unless}}
                                              
                                            </li>
                                            
                                          
                                            <li class="mobile-menu-btn d-lg-none">
                                                <a class="off-canvas-btn" href="#">
                                                    <i class="fa fa-bars"></i>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>



                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Sticky Header End Here -->
            <!-- off-canvas menu start -->
             <aside class="off-canvas-wrapper" id="mobileMenu">
                <div class="off-canvas-overlay"></div>
                <div class="off-canvas-inner-content">
                    <div class="btn-close-off-canvas">
                        <i class="fa fa-times"></i>
                    </div>
                    <div class="off-canvas-inner">

                        <div class="search-box-offcanvas">
                            
                        </div>
                        <!-- mobile menu start -->
                        <div class="mobile-navigation">

                            <!-- mobile menu navigation start -->
                            <nav>
                                <ul class="mobile-menu">
                                    <li class="menu-item-has-children"><a href="/">Home</a>
                                        
                                    </li>
                                    <li class="menu-item-has-children"><a href="/shop">Shop</a>
                                        <ul class="megamenu dropdown">
                                                <ul>
                                                    <li><a href="/shop">Shop</a></li>
                                                            <li><a href="/Cart">Cart</a></li>
                                                            
                                                            <li><a href="/Wishlist">Wishlist</a></li>
                                                        </ul>
                                            </li>
                                        </ul>
                                    </li>
                                   
                                   
                                    <li><a href="/About">About Us</a></li>
                                    <li><a href="/Contact">Contact</a></li>
                                </ul>
                            </nav>
                            <!-- mobile menu navigation end -->
                        </div>
                        <!-- mobile menu end -->
                        <div class="header-top-settings offcanvas-curreny-lang-support">
                            <!-- mobile menu navigation start -->
                            <nav>
                                <ul class="mobile-menu">
                                    <li class="menu-item-has-children"><a href="/MyAccount">My Account</a>
                                    {{#unless token}}
                                        <ul class="dropdown">
                                            <span><a href="/Userlogin">Login</a></span> 
                                        </ul>
                                         <ul class="dropdown">
                                            <span><a href="/userregister">Register</a></span>
                                        </ul>
                                        {{/unless}}
                                    </li>
                                   
                                </ul>
                            </nav>
                            <!-- mobile menu navigation end -->
                        </div>
                        <!-- offcanvas widget area start -->
                        <div class="offcanvas-widget-area">
                            <div class="top-info-wrap text-left text-black">
                                <ul>
                                    <li>
                                        <i class="fa fa-phone"><br>+91 7034936080</i>
                                        <a href="/"></a>
                                    </li>
                                    <li>
                                        <i class="fa fa-envelope"></i>
                                        <a href="/">fruitbasketmails@gmail.com</a>
                                    </li>
                                </ul>
                            </div>
                            
                        </div>
                        <!-- offcanvas widget area end -->
                    </div>
                </div>
            </aside>
            <!-- off-canvas menu end -->
        </header>
        <!-- Breadcrumb Area Start Here -->
        <div class="breadcrumbs-area position-relative">
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center">
                        <div class="breadcrumb-content position-relative section-content">
                            <h3 class="title-3">My Account</h3>
                            <ul>
                                <li><a href="/">Home</a></li>
                                <li>My Account</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Breadcrumb Area End Here -->
        <!-- my account wrapper start -->
         {{#if user}}
        <div class="my-account-wrapper mt-no-text mb-no-text">
            <div class="container container-default-2 custom-area">
                <div class="row">
                    <div class="col-lg-12 col-custom">
                        <!-- My Account Page Start -->
                        <div class="myaccount-page-wrapper">
                            <!-- My Account Tab Menu Start -->
                            <div class="row">
                                <div class="col-lg-3 col-md-4 col-custom">
                                    <div class="myaccount-tab-menu nav" role="tablist">
                                        <a href="#dashboad" class="active" data-bs-toggle="tab"><i class="fa fa-dashboard"></i>
                                            Dashboard</a>
    <a href="#orders" data-bs-toggle="tab" onclick="
    var statusElements = document.querySelectorAll('.tab-content #orders .textstatus');
    statusElements.forEach(function(statusElement) {
        var status = statusElement.textContent.trim();
        if (status === 'Pending') {
            statusElement.style.color = 'orange';
        } else if (status === 'Confirmed') {
            statusElement.style.color = '#08ff3d';
        } else if (status === 'Delivered') {
            statusElement.style.color = 'blue';
        } else if (status === 'Cancelled') {
            statusElement.style.color = 'red';
        } else {
            statusElement.style.color = '#06d1c7'; // Default color
        }
    });
">
    <i class="fa fa-cart-arrow-down"></i> Orders
</a>

                                       
                                       
                                        <a href="#address-edit" id="openAddressEditTab" data-bs-toggle="tab" ><i class="fa fa-map-marker"></i>
                                           saved address</a>
                                        <a href="#account-info" data-bs-toggle="tab"><i class="fa fa-user"></i> Add new
                                            Address</a>
                                         <a href="#account-info" data-bs-toggle="tab" onclick="confirmLogout()" class="text-danger" id="logoutForm"><i class="fa fa-sign-out"></i>Logout</a>
                                    </div>
                                </div>
                                <!-- My Account Tab Menu End -->

                                <!-- My Account Tab Content Start -->
                               
                                <div class="col-lg-9 col-md-8 col-custom">
                                    <div class="tab-content" id="myaccountContent">
                                        <!-- Single Tab Content Start -->
                                        <div class="tab-pane fade show active" id="dashboad" role="tabpanel">
                                            <div class="myaccount-content">
                                                <h3>Dashboard</h3>
                                                <div class="welcome">
                                                   {{#if user}} <p>Hello, <strong>{{user.name}}</strong></p>{{/if}}
                                                </div>
                                                <p class="mb-0">From your account dashboard. you can easily check & view your recent orders, manage your shipping and billing addresses and edit your password and account details.</p>
                                            </div>
                                        </div>
                                        
                                        <!-- Single Tab Content End -->












<div class="tab-pane fade" id="orders" role="tabpanel">
    <div class="myaccount-content">
        <h3>Orders</h3>
        <div class="myaccount-table table-responsive text-center">
        {{#if orders}}   
    <table class="table table-bordered" id="userTable">
        <thead class="thead-light">
            <tr>
          
                <th>Date</th>
                <th>Status</th>
                <th>Method</th>
                <th>Total</th>
                <th>Action</th>
                
            </tr>
        </thead>
        <tbody>
         <tbody>
           
    {{#each orders}}
    <tr>
        <!-- Assuming order number starts from 1 -->
        <td>{{this.date}}</td>
        <td class="textstatus" >{{this.status}}</td>
        <td>{{this.paymentmethod}}</td>
        <td>{{this.totalAmountUserPaid}}</td>
        <td>
            
            <button type="button" class="btn obrien-button-2 primary-color rounded-0" id="OrderListButton" 
                data-userid="{{../_id}}" data-orderid="{{this.orderId}}" onclick="openModal(event)">View</button>
        </td>
    </tr>
    {{/each}}
</tbody>
    </table>

              {{else}}
            <p>No Orders Found</p>
            {{/if}}

            

  


<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Order Details</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closeModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="orderDetailsModalBody"> 
    
      </div>
     
        <div class="modal-footer d-flex justify-content-center align-items-center p-4" id="modalfooterid">
            <a href="/DeleteOrderuser" id="cancelOrderLink" style="color: rgba(250, 1, 1, 0.789);">Cancel this order?</a>
        </div>




    </div>
  </div>
</div>



        </div>
    </div>
</div>



















                                        <!-- Single Tab Content Start -->
                                     
                                        <!-- Single Tab Content End -->

                                        <!-- Single Tab Content Start -->
                                        
                                        <!-- Single Tab Content End -->

                                        <!-- Single Tab Content Start -->
                                        
                                      <div class="tab-pane fade" id="address-edit" role="tabpanel">
    <div class="myaccount-content">
        <h3>Billing Address</h3>
        {{#if addresses}}
        {{#each addresses}}
        <address>
            <p><strong>{{this.firstName}}</strong></p>
            <p>{{this.city}}, {{this.state}} {{this.postcode}}</p>
            <p>Mobile: {{this.phone}}</p>
        </address>
        <button class="btn obrien-button-2 primary-color rounded-0 edit-address-btn" data-address-id="{{this._id}}"><i class="fa fa-edit mr-2"></i>Edit Address</button>
         <i class="fa fa-trash ms-5 delete-address" data-address-id="{{this._id}}"></i>
         <hr>
        {{/each}}
        {{else}}
        <p class="text-center">No address found</p>
        {{/if}}
        
       
    </div>
</div>


                                        <!-- Single Tab Content End -->

                                        <!-- Single Tab Content Start -->
                                        <div class="tab-pane fade" id="account-info" role="tabpanel">
                                            <div class="myaccount-content">
                                                <h3>Account Details</h3>
                                                <div class="account-details-form">
                                                   <form id="addressform">
                                                        <div class="row">
                                                            <div class="col-lg-6 col-custom">
                                                                <div class="single-input-item mb-3">
                                                                     <label>Country <span class="required">*</span></label>
                                            <select class="myniceselect nice-select wide rounded-0" name="country">
                                                <option data-display="India">India</option>    
                                            </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6 col-custom">
                                                                <div class="single-input-item mb-3">
                                                                      <label>First Name <span class="required">*</span></label>
                                            <input placeholder="" type="text" name="firstname">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="single-input-item mb-3">
                                                              <label>Last Name <span class="required">*</span></label>
                                            <input placeholder="" type="text" name="lastname">
                                                        </div>
                                                        <div class="single-input-item mb-3">
                                                            <label>Address <span class="required">*</span></label>
                                            <input placeholder="Street address" type="text" name="mainaddress">
                                                        </div>
                                                      
                                                            <div class="single-input-item mb-3">
                                                                  <label>City <span class="required">*</span></label>
                                            <select class="myniceselect nice-select wide rounded-0" name="city">
                                                <option data-display="Kozhikode">Kozhikode</option>    
                                            </select>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6 col-custom">
                                                                    <div class="single-input-item mb-3">
                                                                       <label>State <span class="required">*</span></label>
                                            <select class="myniceselect nice-select wide rounded-0" name="state">
                                                <option data-display="Kerala">Kerala</option>    
                                            </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-custom">
                                                                    <div class="single-input-item mb-3">
                                                                          <label>Postcode / Zip <span class="required">*</span></label>
                                            <input placeholder="" type="text" name="post">
                                                                    </div>
                                                                </div>
                                                                
                                                            </div>
                                                                   <div class="row">
                                                                <div class="col-lg-6 col-custom">
                                                                    <div class="single-input-item mb-3">
                                               <label>Email Address <span class="required">*</span></label>
                                            <input placeholder="" type="email" name="email"> 
                                            </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-custom">
                                                                    <div class="single-input-item mb-3">
                                                                        <label>Phone <span class="required">*</span></label>
                                            <input type="text" name="phone">
                                                                    </div>
                                                                </div>
                                                                
                                                            </div>
                                                      
                                                        <div class="single-input-item single-item-button">
                                                            <button class="btn obrien-button primary-btn" type="submit">Save </button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div> <!-- Single Tab Content End -->
                                    </div>
                                </div> <!-- My Account Tab Content End -->
                           
                               
                            </div>
                        </div> <!-- My Account Page End -->
                        
                    </div>
                </div>
            </div>
        </div>   
                                {{/if}}
        <!-- my account wrapper end -->
        <div class="support-area">
            <div class="container container-default custom-area">
                <div class="row">
                    <div class="col-lg-12 col-custom">
                        <div class="support-wrapper d-flex">
                            <div class="support-content">
                                <h1 class="title">Need Help ?</h1>
                                <p class="desc-content">Call our support 24/7 at 7034936080</p>
                            </div>
                            <div class="support-button d-flex align-items-center">
                                <a class="obrien-button primary-btn" href="/Contact">Contact now</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Support Area End Here -->
        <!-- Footer Area Start Here -->
         <footer class="footer-area">
            <div class="footer-widget-area">
                <div class="container container-default custom-area">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-3 col-custom">
                            <div class="single-footer-widget m-0">
                                <div class="footer-logo">
                                    <a href="/">
                                       <img src="user-assets/images/logo/footer.png" alt="Logo Image">
                                    </a>
                                    
                                </div>
                                <p class="desc-content">Fruitbasket is the best parts shop of your daily nutritions. What kind of nutrition do you need you can get here</p>
                               
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-6 col-lg-2 col-custom">
                            <div class="single-footer-widget">
                                <h2 class="widget-title">Information</h2>
                                <ul class="widget-list">
                                    <li><a href="/About">Our Company</a></li>
                                    <li><a href="/Contact">Contact Us</a></li>
                                    <li><a href="/About">Our Services</a></li>
                                 
                                </ul>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-6 col-lg-2 col-custom">
                            <div class="single-footer-widget">
                                <h2 class="widget-title">Quicklink</h2>
                                <ul class="widget-list">
                                    <li><a href="/About">About</a></li>
                                    
                                    <li><a href="/shop">Shop</a></li>
                                    <li><a href="/cart">Cart</a></li>
                                    <li><a href="/Contact">Contact</a></li>
                                </ul>
                            </div>
                        </div>
                     
                        <div class="col-12 col-sm-6 col-md-6 col-lg-3 col-custom">
                            <div class="single-footer-widget">
                                <h2 class="widget-title">See Information</h2>
                                <div class="widget-body">
                                    <address>3rd Floor Hilite business park , calicut<br>Phone:+91 7034906080<br>Email: https://fruitbasketmails@gmail.com</address>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
           
        </footer>
        <!-- Footer Area End Here -->
    </div>





<!-- Modal -->
<div class="modal fade " id="editAddressModal" tabindex="-1" aria-labelledby="editAddressModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg ">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editAddressModalLabel">Edit Address</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                 <form id="editAddressForm">
                    <input type="hidden" name="editid" id="editid">
                    <div class="mb-3">
                        <label for="editFirstName" class="form-label">First Name</label>
                        <input type="text" class="form-control" id="editFirstName" name="editFirstName">
                    </div>
                    <div class="mb-3">
                        <label for="editLastName" class="form-label">Last Name</label>
                        <input type="text" class="form-control" id="editLastName" name="editLastName">
                    </div>
                    <div class="mb-3">
                        <label for="editMainAddress" class="form-label">Address</label>
                        <input type="text" class="form-control" id="editMainAddress" name="editMainAddress">
                    </div>
                    <div class="mb-3">
                        <label for="editCountry" class="form-label">Country</label>
                        <input type="text" class="form-control" id="editCountry" name="editCountry" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="editCity" class="form-label">City</label>
                        <input type="text" class="form-control" id="editCity" name="editCity" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="editState" class="form-label">State</label>
                        <input type="text" class="form-control" id="editState" name="editState" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="editPostcode" class="form-label">Postcode</label>
                        <input type="text" class="form-control" id="editPostcode" name="editPostcode" >
                    </div>
                    <div class="mb-3">
                        <label for="editEmail" class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="editEmail" name="editEmail">
                    </div>
                    <div class="mb-3">
                        <label for="editPhone" class="form-label">Phone</label>
                        <input type="text" class="form-control" id="editPhone" name="editPhone">
                    </div>
                     <div class="modal-footer ">
                <button type="button"  data-bs-dismiss="modal" class="obrien-button primary-btn">Close</button>
                <button type="submit"  form="editAddressForm" class="obrien-button primary-btn">Save Changes</button>
            </div>
                </form>
            </div>
            
        </div>
    </div>
</div>






{{#if successMessage}}
    <script>
        Toastify({
            text: "{{ successMessage }}",
            duration: 3000, // Display duration in milliseconds
            gravity: "top", // Display position
            position: "center", // Display position
            backgroundColor: "#32CD32", // Success color
            stopOnFocus: true // Stop timer on focus
        }).showToast();
    </script>
{{/if}}


    <!-- JS
============================================ -->

    <!-- jQuery JS -->
    <script src="/user-assets/js/vendor/jquery-3.6.0.min.js"></script>
    <!-- jQuery Migrate JS -->
    <script src="/user-assets/js/vendor/jquery-migrate-3.3.2.min.js"></script>
    <!-- Modernizer JS -->
    <script src="/user-assets/js/vendor/modernizr-2.8.3.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="/user-assets/js/vendor/bootstrap.bundle.min.js"></script>
    <!-- Slick Slider JS -->
    <script src="/user-assets/js/plugins/slick.min.js"></script>
    <!-- Countdown JS -->
    <script src="/user-assets/js/plugins/jquery.countdown.min.js"></script>
    <!-- Ajax JS -->
    <script src="/user-assets/js/plugins/jquery.ajaxchimp.min.js"></script>
    <!-- Jquery Nice Select JS -->
    <script src="/user-assets/js/plugins/jquery.nice-select.min.js"></script>
    <!-- Jquery Ui JS -->
    <script src="/user-assets/js/plugins/jquery-ui.min.js"></script>
    <!-- jquery magnific popup js -->
    <script src="/user-assets/js/plugins/jquery.magnific-popup.min.js"></script>

    <!-- Main JS -->
    <script src="/user-assets/js/main.js"></script>

</body>


<!-- Mirrored from template.hasthemes.com/obrien/obrien/my-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Feb 2024 05:40:19 GMT -->
</html>
<script>


    
document.getElementById('addressform').addEventListener('submit', async (e) => {
    e.preventDefault(); // Prevent the default form submission

    const form = e.target;
    const formData = new FormData(form);

    try {
        const response = await fetch('/AddAddressform', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(Object.fromEntries(formData.entries())) // Convert FormData to JSON
           
        });

        const data = await response.json();
        if (data.success) {
            Toastify({
                text: data.message,
                duration: 3000,
                close: true,
                gravity: 'top',
                position: 'center'
            }).showToast();
        
        
    
           const addressEditTabLink = document.querySelector('a[href="#address-edit"]');
        if (addressEditTabLink) {
            addressEditTabLink.click(); // Simulate a click on the tab link to open the tab    
        }
          
        }
        if(data.messagee){
               Toastify({
            text: data.messagee,
            duration: 3000,
            close: true,
            gravity: 'top',
            position: 'center',
            backgroundColor: 'orange', // Set background color for warning
            stopOnFocus: true, // Stop the timeout when the window gets focus
        }).showToast();
        }
        else {
            
        }
    } catch (error) {
        console.error('Error adding address:', error);
        // Handle errors
    }

})  
    


 

  function confirmLogout() {
        Swal.fire({
            title: 'Are you sure?',
            text: "You will be logged out.",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, logout!'
        }).then((result) => {
            if (result.isConfirmed) {
                window.location.href = "/logoutuser"; // Redirect to the logout URL
            }
        });
    }

    function openModal(event) {
  const modal = document.getElementById('exampleModal');
  modal.classList.add('show');
  modal.style.display = 'block';
  modal.setAttribute('aria-hidden', 'false');
  document.body.classList.add('modal-open');

 const userId = event.target.getAttribute('data-userid');
const orderId = event.target.getAttribute('data-orderid');
console.log('OrderID:', orderId);
fetch(`/getOrderDetails?orderId=${orderId}`)
    .then(response => response.json())
    .then(data => {
        const modalBody = document.getElementById('orderDetailsModalBody');

        modalBody.innerHTML = '';
        const orderIdElement = document.createElement('p');
        orderIdElement.textContent = `Order ID: ${data.orderId}`;
        modalBody.appendChild(orderIdElement);
        const status = document.createElement('p');
        status.textContent = `Status: ${data.status}`
        modalBody.appendChild(status);
        if (data.items && data.items.length > 0) {
            const itemsElement = document.createElement('div'); // Fixed the typo here
            data.items.forEach(item => {
                const productNameElement = document.createElement('p');
                productNameElement.textContent = `Product Name: ${item.productName}`;
                itemsElement.appendChild(productNameElement);
            });
            modalBody.appendChild(itemsElement);
        }
          const totalPriceElement = document.createElement('h6');
        totalPriceElement.textContent = `Total Price: ${data.totalAmountUserPaid}`;
         modalBody.appendChild(totalPriceElement);

     const cancelOrderLink = document.getElementById('cancelOrderLink');
    if (data.usercancelledorder || data.status == 'Delivered') {
        cancelOrderLink.style.display = 'none';
    } else {
        cancelOrderLink.style.display = 'block';
    }

  
    

    
    })
    .catch(error => {
        console.error('Error:', error);
        // Handle error or display error message in modal body
        const modalBody = document.getElementById('orderDetailsModalBody');
        modalBody.innerHTML = '<p>Error fetching order details.</p>';
    });

  
    }

function closeModal() {
  const modal = document.getElementById('exampleModal');
  modal.classList.remove('show');
  modal.style.display = 'none';
  modal.setAttribute('aria-hidden', 'true');
  document.body.classList.remove('modal-open');
}




// Get all the "Edit Address" buttons
const editAddressButtons = document.querySelectorAll('.edit-address-btn');

// Add event listener to each button
editAddressButtons.forEach(button => {
    button.addEventListener('click', async (event) => {
        event.preventDefault(); // Prevent the default link behavior
        
        const addressId = button.dataset.addressId; // Get the address ID from the button's data attribute

        try {
            const response = await fetch(`/getAddressDetails?id=${addressId}`);
            const data = await response.json();
            
            if (data.success) {
 
               const addressDetails = data.address;

        // Populate the form with address details
         document.getElementById('editid').value = addressDetails._id;
        document.getElementById('editFirstName').value = addressDetails.firstName;
        document.getElementById('editLastName').value = addressDetails.lastName;
        document.getElementById('editMainAddress').value = addressDetails.address;
        document.getElementById('editCountry').value = addressDetails.country;
        document.getElementById('editCity').value = addressDetails.city;
        document.getElementById('editState').value = addressDetails.state;
        document.getElementById('editPostcode').value = addressDetails.postcode;
        document.getElementById('editEmail').value = addressDetails.email;
        document.getElementById('editPhone').value = addressDetails.phone;

        // Show the modal after populating the form
        const modal = new bootstrap.Modal(document.getElementById('editAddressModal'));
        modal.show();
          
            } else {
                // Handle error response
                console.error('Error fetching address details:', data.message);
            }
        } catch (error) {
            console.error('Error fetching address details:', error);
        }
    });
});


const editAddressForm = document.getElementById('editAddressForm');

editAddressForm.addEventListener('submit', async (event) => {
    event.preventDefault(); // Prevent the default form submission behavior
    
    // Create a FormData object and populate it with the form data
    const formData = new FormData(editAddressForm);

    const addressData = {
        editid:formData.get('editid'),
        editFirstName: formData.get('editFirstName'),
        editLastName: formData.get('editLastName'),
        editMainAddress: formData.get('editMainAddress'),
        editCountry: formData.get('editCountry'),
        editCity: formData.get('editCity'),
        editState: formData.get('editState'),
        editPostcode: formData.get('editPostcode'),
        editEmail: formData.get('editEmail'),
        editPhone: formData.get('editPhone')
    };
    console.log(addressData)

    try {
        const response = await fetch('/saveEditedAddress', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(addressData)
        });

        const data = await response.json();
        
        if (data.success) {
            Toastify({
                text: 'Address updated successfully!',
                duration: 3000,
                close: true,
                gravity: 'top',
                position: 'center'
            }).showToast();
              setTimeout(() => {
        window.location.reload(); // Reload the page after 2 seconds
    }, 1000);
            
        } else {
            Toastify({
                text: data.message || 'Error updating address',
                duration: 3000,
                close: true,
                gravity: 'top',
                position: 'center',
                backgroundColor: 'red'
            }).showToast();
            console.error('Error saving edited address:', data.message);
        }
    } catch (error) {
        console.error('Error saving edited address:', error);
    }
});



document.addEventListener('click', async (event) => {
    if (event.target.classList.contains('delete-address')) {
        const addressId = event.target.dataset.addressId;

        Swal.fire({
            title: 'Are you sure?',
            text: 'You are about to delete this address. This action cannot be undone.',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, delete it!'
        }).then(async (result) => {
            if (result.isConfirmed) {
                try {
                    const response = await fetch(`/deleteAddress?id=${addressId}`, {
                        method: 'DELETE'
                    });

                    const data = await response.json();

                    if (data.success) {
                        event.target.parentElement.remove();
                        Toastify({
                            text: 'Address deleted successfully!',
                            duration: 3000,
                            close: true,
                            gravity: 'top',
                            position: 'center'
                        }).showToast();
                        setTimeout(()=>{
                            window.location.reload()
                        },1000)
                    } else {
                        Toastify({
                            text: data.message || 'Error deleting address',
                            duration: 3000,
                            close: true,
                            gravity: 'top',
                            position: 'center',
                            backgroundColor: 'red'
                        }).showToast();
                        console.error('Error deleting address:', data.message);
                    }
                } catch (error) {
                    console.error('Error deleting address:', error);
                }
            } else if (result.dismiss === Swal.DismissReason.cancel) {
                console.log('Deletion canceled by user');
            }
        });
    }
});



</script>